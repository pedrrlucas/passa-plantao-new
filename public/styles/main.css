        .info-tag {
            display: inline-flex;
            align-items: center;
            padding: 0.2rem 0.6rem;
            border-radius: 9999px;
            font-size: 0.8rem;
            font-weight: 500;
            line-height: 1.2;
            background-color: #f9fafb; /* Cor MAIS CLARA (bg-gray-50) */
            color: #4b5563; /* text-gray-600 */
            border: 1px solid #f3f4f6; /* Borda sutil (border-gray-100) */
            white-space: normal; 
            text-align: left;
            max-width: 100%;
        }

        /* Container para as tags (Sua excelente nova classe) */
        .tags-display-area {
            display: flex;
            flex-wrap: wrap;
            gap: 0.3rem; /* Aumentei um pouco o gap para melhor leitura */
            min-height: 24px;
            padding-top: 0.25rem;
        }

        /* 1. Botão de remover DENTRO da tag. Por padrão, ele fica ESCONDIDO. */
        .info-tag .remove-item-btn {
            display: none; /* COMEÇA ESCONDIDO */
            margin-left: 0.4rem;
            cursor: pointer;
            border-radius: 50%;
            width: 16px;
            height: 16px;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            color: #6b7280; /* text-gray-500 */
            transition: all 0.2s ease;
        }

        /* 2. SÓ MOSTRAMOS o botão de remover quando um ancestral tem a classe '.module-editing' */
        .module-editing .info-tag .remove-item-btn {
            display: flex; /* SÓ APARECE NO MODO DE EDIÇÃO */
        }

        /* 3. O efeito hover continua o mesmo */
        .info-tag .remove-item-btn:hover {
            background-color: #fca5a5; /* bg-red-300 */
            color: #b91c1c; /* text-red-700 */
            transform: scale(1.1);
        }

        /* Estilo para os containers dos itens de texto */
        .item-text-container {
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            gap: 0.1rem; /* Espaço mínimo entre os spans */
            line-height: 1.5; /* Melhora a legibilidade se quebrar a linha */
            color: #374151; /* Cor do texto (text-gray-700) */
        }

        /* Suaviza a paginação */
        .pagination-transition {
            transition: all 0.3s ease;
        }

        .pagination-transition:hover {
            transform: translateY(-1px);
        }

        /* Estilos do modal de visualização de registros de passagem de plantão */
        #view-handover-modal {
            z-index: 60 !important;
        }
        #view-handover-modal .bg-gray-900 {
            background-color: rgba(0, 0, 0, 0.85) !important;
        }

        /* Estilos personalizados */
        .overflow-visible-important {
            overflow: visible !important;
        }

        /* Estilo base para a aplicação */
        body {
            font-family: 'Inter', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        /* Estilo para a barra de rolagem */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
        /* Estilo para transição do acordeão */
        .accordion-content { max-height: 0; overflow: hidden; transition: max-height 0.4s ease-in-out; }
        .autocomplete-active { background-color: #e0f2fe; }
        .tag { display: inline-flex; align-items: center; padding: 0.25rem 0.75rem; margin: 0.25rem; border-radius: 9999px; font-weight: 500; font-size: 0.875rem; line-height: 1.25rem; }
        .tag-remove { margin-left: 0.5rem; cursor: pointer; border-radius: 50%; padding: 0.1rem; display: flex; align-items: center; justify-content: center; }
        .tag-remove:hover { background-color: rgba(0,0,0,0.1); }
        .time-tag { background-color: #e0e7ff; color: #3730a3; border: 1px solid #c7d2fe; }
        .medication-block { border: 1px solid #e5e7eb; border-radius: 0.5rem; padding: 0.75rem; margin-bottom: 0.75rem; }
        #print-view {
            display: none;
        }

        @media print {
            /* --- NOVAS REGRAS PARA CORRIGIR A IMPRESSÃO DE MÚLTIPLAS PÁGINAS --- */
            html, body {
                height: auto !important;      /* Permite que a altura cresça com o conteúdo */
                overflow: visible !important;  /* Garante que nada seja cortado */
                background-color: #fff;        /* Fundo branco para impressão */
            }
            /* ----------------------------------------------------------------- */

            /* Esconde o container principal da aplicação e tudo que não deve ser impresso */
            body > #app {
                display: none !important;
            }

            /* Garante que o body não tenha configurações que possam atrapalhar a impressão (redundante, mas seguro) */
            body {
                overflow: visible;
            }

            /* Mostra e formata a área de impressão */
            #print-view {
                display: block !important;
                position: static !important; /* Remove qualquer posicionamento fixo/absoluto */
                width: 100% !important;
                border: none !important;
                box-shadow: none !important;
                max-height: none !important; /* Remove qualquer limite de altura */
                overflow: visible !important;
            }

            .status-badge {
                color: black !important;
                background-color: transparent !important;
                border: 1px solid #333 !important; /* Adiciona uma borda sutil para manter o formato */
                font-weight: 600 !important; /* Deixa o texto um pouco mais forte */
                padding-left: 8px !important;
                padding-right: 8px !important;
            }
        }
        
        .accordion-form-content {
            transition: max-height 0.4s ease-in-out;
        }

        .module-editing {
            border: 2px solid #60a5fa; /* Cor azul (blue-400) */
            box-shadow: 0 4px 14px 0 rgba(96, 165, 250, 0.5); /* Sombra azul */
            transition: all 0.3s ease-in-out;
        }
        .module-static-filled {
            opacity: 0.7;
            transition: opacity 0.3s ease;
        }


        /* Garante que os inputs e textareas no formulário sejam mais compactos */
        #add-handovers-form input[type="text"],
        #add-handovers-form input[type="time"],
        #add-handovers-form textarea {
            padding-top: 0.3rem;
            padding-bottom: 0.3rem;
            padding-left: 0.5rem;
            padding-right: 0.5rem;
            font-size: 0.875rem; /* text-sm */
        }

        /* Reduz o tamanho da fonte dos itens de lista nos módulos de riscos/precauções */
        #module-riscos .item-text-container .item-text,
        #module-precaucoes .item-text-container .item-text {
            font-size: 0.8rem; /* Um pouco menor que text-sm */
        }

        .clickable-item-area {
            padding: 0.5rem;
            border-radius: 0.5rem; /* rounded-lg */
            background-color: transparent;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            border: 2px dashed #e5e7eb; /* Borda tracejada (border-gray-200) */
            min-height: 54px; /* Garante uma altura mínima clicável */
        }

        .clickable-item-area:hover {
            background-color: #f9fafb; /* bg-gray-50 */
            border-color: #d1d5db; /* border-gray-300 */
        }

        /* Estilo para o contêiner que agrupa toda a seção de alergia */
        .allergy-module-box {
            border: 2px dashed #e5e7eb; /* Borda tracejada (border-gray-200) */
            border-radius: 0.5rem; /* rounded-lg */
            padding: 0.75rem; /* p-3 */
            transition: all 0.2s ease-in-out;
        }

        /* --- OTIMIZAÇÃO DO MÓDULO DE EXAMES --- */
        /* 1. Transforma o card do módulo em um container flexível vertical */
        #module-exames {
            display: flex;
            flex-direction: column;
            /* Garante que o módulo tente ocupar a altura disponível na sua coluna */
            min-height: 400px;
            position: relative;
        }

        /* 2. Faz a área das listas crescer para preencher o espaço vazio */
        #exam-lists-container {
            flex-grow: 1;
            min-height: 0; 
            gap: 1rem;
            margin-bottom: 0.75rem;
        }

        /* 3. Faz as listas individuais terem scroll se o conteúdo for maior que o espaço */
        #scheduled-exams-list,
        #pending-exams-list {
            flex-grow: 1; /* Faz a lista crescer para preencher o espaço vertical disponível */
            overflow-y: auto; /* Agora a rolagem funcionará corretamente */
            padding-right: 4px; /* Espaço para a barra de rolagem não colar no texto */
            height: 150px; 

        }

        /* 4. Garante que a área do botão fique sempre no final */
        #exam-main-action-area {
            /* A propriedade 'margin-top: auto' em um container flex empurra o elemento para o final */
            margin-top: auto; 
            padding-top: 0.75rem; /* Adiciona um respiro acima do botão */
            border-top: 1px solid #e5e7eb; /* border-gray-200 */
        }

        /* --- CORREÇÃO DE LAYOUT DO EDITOR DE EXAMES --- */
        #exam-editor-area {
            position: absolute;   /* Tira o elemento do fluxo normal */
            bottom: 0;            /* Alinha na base do card */
            left: 0;              /* Alinha na esquerda do card */
            right: 0;             /* Alinha na direita do card */
            background-color: white;
            border-top: 1px solid #e5e7eb;
            padding: 1rem;
            box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease-in-out;
            /* A linha abaixo pode ou não já existir. O importante é que position: absolute já está lá, o que é ainda melhor que relative. Então, não precisa mudar nada aqui! */
        }

        #exam-lists-container > div {
            display: flex;
            flex-direction: column;
            min-height: 0; /* Crucial para rolagem em containers flex aninhados */
        }

        /* --- OTIMIZAÇÃO DO MÓDULO DE MEDICAÇÕES --- */
        /* 1. Transforma o card principal em um container flexível com altura fixa */
        #module-medicacoes {
            display: flex;
            flex-direction: column;
            position: relative;
        }

        /* 2. Faz a lista de medicações crescer e ter rolagem */
        #medications-list-container {
            flex-grow: 1;      /* Faz a lista ocupar todo o espaço vertical disponível */
            overflow-y: auto;  /* Ativa a rolagem quando o conteúdo transbordar */
            min-height: 0;     /* Correção essencial para rolagem em containers flex */
            padding-right: 4px; /* Espaço para a barra de rolagem */
        }

        /* 3. Estilo para o novo botão de adicionar horário com emoji */
        .add-med-time-btn-emoji {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1.25rem; /* Tamanho do emoji */
            line-height: 1;
            padding: 0.25rem;
            border-radius: 9999px;
            transition: background-color 0.2s;
        }

        .add-med-time-btn-emoji:hover {
            background-color: #eef2ff; /* indigo-50 */
        }
        
        /* Estilo para o card de medicação, espelhado no .exam-item */
        .medication-block {
            background-color: white;
            padding: 0.75rem; /* p-3 */
            border-radius: 0.25rem; /* rounded */
            border: 1px solid #e5e7eb; /* border-gray-200 */
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); /* shadow-sm */
            font-size: 0.875rem; /* text-sm */
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }

        /* Container para os botões de ação (emojis) */
        .med-actions {
            display: flex;
            gap: 0.5rem;
            font-size: 1.125rem; /* text-lg */
        }

        #medication-editor-area {
            background-color: #f9fafb; /* bg-gray-50 */
            padding: 0.75rem; /* p-3 */
            border-radius: 0.375rem; /* rounded-md */
            border: 1px solid #e5e7eb; /* border-gray-200 */
        }

        /* Estilo para o container do calendário inline */
        #inline-time-picker-container .flatpickr-calendar {
            /* Remove sombras, bordas e posicionamento absoluto do modo popup */
            position: static !important;
            box-shadow: none !important;
            border: 1px solid #d1d5db; /* border-gray-300 */
            width: 100% !important;
            max-width: 280px; /* Impede que fique largo demais */
            margin: 0 auto; /* Centraliza */
        }

        .news2-low { background-color: #dcfce7; color: #166534; } /* bg-green-100 text-green-800 */
        .news2-low-medium { background-color: #fef9c3; color: #854d0e; } /* bg-yellow-100 text-yellow-800 */
        .news2-medium { background-color: #ffedd5; color: #9a3412; } /* bg-orange-100 text-orange-800 */
        .news2-high { background-color: #fee2e2; color: #510909; } /* bg-red-100 text-red-800 */

        .fugulin-minimos { background-color: #dcfce7; color: #166534; } /* Verde (bg-green-100) */
        .fugulin-intermediarios { background-color: #fef9c3; color: #854d0e; } /* Amarelo (bg-yellow-100) */
        .fugulin-alta-dependencia { background-color: #ffedd5; color: #9a3412; } /* LARANJA (bg-orange-100) */
        .fugulin-semi-intensivos { background-color: #fee2e2; color: #960e0e; } /* Vermelho Claro (bg-red-100) */
        .fugulin-intensivos { background-color: #fecaca; color: #510909; } /* Vermelho Escuro (bg-red-200) */


        /* O contêiner do menu de seleção */
        .custom-select-options {
            position: absolute; /* Para flutuar sobre o conteúdo */
            background-color: white;
            border: 1px solid #d1d5db; /* border-gray-300 */
            border-radius: 0.5rem; /* rounded-lg */
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            z-index: 100; /* Garante que fique na frente */
            max-height: 200px;
            overflow-y: auto;
            transition: all 0.2s ease-out;
            padding: 0.25rem; /* p-1 */
        }

        /* Cada item individual dentro do menu */
        .custom-select-option {
            padding: 0.5rem 0.75rem; /* p-2 px-3 */
            cursor: pointer;
            border-radius: 0.375rem; /* rounded-md */
            font-size: 0.875rem; /* text-sm */
            color: #374151; /* text-gray-700 */
            transition: background-color 0.15s ease-in-out;
            white-space: normal;
            text-align: left;
        }

        /* Efeito hover para os itens */
        .custom-select-option:hover {
            background-color: #f3f4f6; /* bg-gray-100 */
            color: #111827; /* text-gray-900 */
        }

        /* Estilo para a área clicável do módulo de monitoramento */
        .monitoring-item-area {
            min-height: 54px; /* Garante altura mínima consistente */
        }

        /* Estilo para a área que exibe o valor inserido */
        .monitoring-display-area {
            font-size: 0.95rem; /* Aumenta um pouco o texto do valor */
            font-weight: 600; /* Deixa em negrito */
            color: #1e40af; /* Cor azul (text-blue-800) */
            min-height: 24px; /* Altura mínima para não "pular" quando vazio */
            padding-top: 0.1rem;
        }

        /* Estilo para os inputs de monitoramento, para serem mais compactos */
        #module-monitoramento .monitoring-input {
            padding: 0.3rem 0.5rem; /* Menos preenchimento vertical */
            font-size: 0.875rem; /* text-sm */
            border-radius: 0.375rem; /* rounded-md */
            border: 1px solid #d1d5db; /* border-gray-300 */
            box-shadow: inset 0 1px 2px rgba(0,0,0,0.05);
        }

        /* Remove a borda padrão do input quando ele está focado */
        #module-monitoramento .monitoring-input:focus {
            outline: none;
            border-color: #3b82f6; /* Cor da borda azul ao focar */
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.4); /* Sombra externa azul */
        }

        /* Esta regra remove a altura e margem do container de tags de alergia APENAS quando ele estiver vazio */
        #allergies-tags-container:empty {
            min-height: 0;
            margin-bottom: 0.25rem; /* Reduz a margem inferior quando vazio */
            padding-top: 0;
        }

        /* Estilos GENÉRICOS para o conteúdo dos modais de handover */
        .summary-section {
            background-color: #f9fafb; /* bg-gray-50 */
            border: 1px solid #e5e7eb; /* border-gray-200 */
            border-radius: 0.5rem; /* rounded-lg */
            padding: 1rem;
            margin-bottom: 1rem; /* Espaçamento entre as seções */
        }
        .summary-section:last-child {
            margin-bottom: 0;
        }
        .summary-section-header {
            font-size: 0.875rem; /* text-sm */
            font-weight: 600; /* font-semibold */
            color: #111827; /* text-gray-900 - Título mais escuro */
            border-bottom: 1px solid #e5e7eb;
            padding-bottom: 0.5rem;
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
        }
        .summary-item {
            padding-bottom: 0.5rem; /* Pequeno espaço entre os itens */
        }
        .summary-item-label {
            font-weight: 600; /* font-semibold */
            color: #1f2937; /* text-gray-800 - Rótulo preto */
            display: block; /* Rótulo em sua própria linha */
        }
        .summary-item-value {
            color: #374151; /* text-gray-700 */
            padding-left: 0.25rem; /* Leve indentação do valor */
        }
        .summary-item-value ul {
            list-style-type: none;
            padding-left: 0;
            margin-top: 0.25rem;
        }
        .summary-item-value li {
            padding-bottom: 0.25rem;
        }

        /* --- ESTILO PARA ALERGIA ATIVA E CLICÁVEL --- */
        .allergy-module-box.is-active {
            border-color: #d1d5db; /* border-gray-300 */
        }

        .allergy-module-box.is-active:hover {
            cursor: pointer;
            border-color: #9ca3af; /* border-gray-400 */
        }

        .history-item-button {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            padding: 0.75rem 1rem; /* 12px 16px */
            border-bottom: 1px solid #e5e7eb; /* border-gray-200 */
            text-align: left;
            transition: background-color 0.2s ease-in-out;
        }

        .history-item-button:hover {
            background-color: #f9fafb; /* bg-gray-50 */
            cursor: pointer;
        }

        .history-item-button:last-child {
            border-bottom: none;
        }

        .history-item-info {
            display: flex;
            align-items: center;
            gap: 0.75rem; /* 12px */
        }

        .history-item-icon {
            flex-shrink: 0;
            width: 2.5rem; /* 40px */
            height: 2.5rem; /* 40px */
            border-radius: 9999px; /* rounded-full */
            background-color: #eef2ff; /* bg-indigo-100 */
            color: #4338ca; /* text-indigo-700 */
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* --- ESTILO PARA O NOVO BOTÃO DE VOLTAR DOS MODAIS --- */
        .modal-back-button {
            flex-shrink: 0;
            padding: 0.5rem; /* 8px */
            border-radius: 9999px; /* rounded-full */
            color: #4b5563; /* text-gray-600 */
            background-color: transparent;
            transition: background-color 0.2s, color 0.2s;
        }

        .modal-back-button:hover {
            background-color: #f3f4f6; /* bg-gray-100 */
            color: #1f2937; /* text-gray-800 */
            cursor: pointer;
        }

        /* --- CSS para o Indicador de Conectividade --- */
        .status-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 6px;
            transition: background-color 0.3s ease;
        }
        .status-online {
            background-color: #22c55e; /* green-500 */
        }

        .status-connecting {
            background-color: #facc15; /* yellow-400 */
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        .status-offline {
            background-color: #a1a1aa; /* zinc-400 */
            animation: pulse 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }

        @keyframes pulse {
        50% {
            opacity: .5;
        }
        }

        /* 1. Estilo base para todos os cards nos módulos para permitir o alinhamento */
        .module-card {
            display: flex;
            flex-direction: column;
            height: 100%; /* Faz o card tentar ocupar toda a altura da célula do grid */
        }

        /* Garante que o conteúdo interno dos módulos de Exames e Medicações cresça */
        #exam-lists-container,
        #medications-list-container {
            flex-grow: 1;
        }

        /* --- ESTILO PARA ITEM DE DISPOSITIVO --- */
        .device-item-box {
            display: flex;
            align-items: center;
            justify-content: flex-start; /* Alinha o conteúdo à esquerda */
            padding: 0.4rem;
            border: 2px dashed #e5e7eb; /* border-2 border-dashed border-gray-200 */
            border-radius: 0.5rem; /* rounded-lg */
            transition: all 0.2s ease-in-out;
        }

        .device-item-box:hover {
            background-color: #f9fafb; /* bg-gray-50 */
            border-color: #d1d5db; /* border-gray-300 */
        }

        /* --- OTIMIZAÇÃO DO MÓDULO DE DIAGNÓSTICO --- */

        /* 1. O contêiner principal dos itens do módulo */
        #module-diagnostico .module-content-area {
            display: flex;          /* Ativa o layout flexível */
            flex-direction: column; /* Organiza os itens em uma coluna (verticalmente) */
            height: 100%;           /* Garante que o contêiner ocupe toda a altura do card */
            gap: 0.75rem;           /* (Tailwind: gap-3) Adiciona um espaçamento consistente e igual entre todos os itens */
        }

        /* 2. A seção específica da Evolução/Plano */
        #module-diagnostico .evolution-section {
            display: flex;          /* Também se torna um contêiner flexível */
            flex-direction: column; /* Para o label e o textarea ficarem um em cima do outro */
            flex-grow: 1;           /* ESSENCIAL: Faz esta seção crescer para ocupar todo o espaço vertical que sobrar */
            min-height: 0;          /* Necessário para garantir que o flex-grow funcione corretamente em todos os navegadores */
        }

        /* 3. O próprio campo de texto da evolução */
        #module-diagnostico .evolution-section textarea {
            flex-grow: 1;           /* Faz o textarea preencher o espaço disponível dentro da sua seção */
            resize: none;           /* Impede que o usuário redimensione o textarea, o que quebraria o layout */
        }

        /* --- OTIMIZAÇÃO DOS MÓVEIS DE PRECAUÇÕES E DISPOSITIVOS --- */

        /* 1. Transforma os cards dos módulos em containers flexíveis verticais */
        #module-precaucoes,
        #module-dispositivos {
            display: flex;
            flex-direction: column;
            height: 100%; /* Garante que o card ocupe toda a altura da célula do grid */
        }

        /* 2. Faz as áreas de conteúdo (a lista de tags/dispositivos) crescerem para ocupar o espaço vazio */
        #precaucoes-container,
        #dispositivos-grid {
            flex-grow: 1;
            /* Boa prática para evitar problemas de overflow em flex containers */
            min-height: 0; 
            padding-bottom: 0.75rem;
        }

        /* 3. Empurra as áreas de ação (botão "+ Novo" e "Cancelar") para o final do card */
        #module-precaucoes .trigger-wrapper,
        #module-precaucoes .cancel-action-wrapper,
        #module-dispositivos .trigger-wrapper,
        #module-dispositivos .cancel-action-wrapper {
            margin-top: auto; /* A mágica do flexbox para empurrar para o fundo */
        }

        /* --- AJUSTE DE LAYOUT PARA O MÓDULO DE OBSERVAÇÕES GERAIS --- */

        /* 1. Transforma o card principal em um container flexível vertical. */
        #module-observacoes {
            display: flex;
            flex-direction: column;
        }

        /* 2. Faz o container que envolve a caixa de texto crescer para ocupar o espaço. */
        /* Usamos "> div:last-child" para selecionar o div que contém o textarea. */
        #module-observacoes > div:last-child {
            display: flex; /* Para que o filho (textarea) possa esticar */
            flex-grow: 1;
        }

        /* 3. Faz a caixa de texto (textarea) esticar para preencher 100% da altura do seu container pai. */
        #form-pending-obs {
            height: 100%;
            resize: none; /* Opcional: Desativa o redimensionamento manual pelo usuário, o que melhora a estética. */
        }

        /* --- CORREÇÃO DE ALINHAMENTO INTERNO PARA MÓDULOS FLEXÍVEIS --- */

        #precaucoes-container,
        #dispositivos-grid {
            /*
            * Impede que os itens internos (tags e checkboxes) se estiquem ou se espalhem verticalmente.
            * 'align-content: flex-start' alinha todo o conteúdo ao topo do container,
            * deixando o espaço extra vazio na parte inferior, exatamente onde queremos.
            */
            align-content: flex-start;
        }

        /* --- ESTILOS PARA O NOVO LAYOUT DE ADENDOS --- */
        
        /* 1. Transforma o container principal do modal em um container flexível vertical */
        .modal-flex-container {
            display: flex;
            flex-direction: column;
            max-height: 85vh; /* Define a altura máxima como 85% da altura da tela */
            width: 90%; /* Ocupa 90% da largura da tela */
            max-width: 1024px; /* Define uma largura máxima de 1024px para telas grandes */
        }

        /* 2. Faz a área de conteúdo principal crescer e ter sua própria rolagem (sem alteração) */
        .modal-scrollable-content {
            flex-grow: 1;
            overflow-y: auto;
            padding-right: 0.5rem;
        }
        
        /* 3. CORREÇÃO: Container de adendos agora tem fundo branco e apenas uma borda superior */
        .adendos-container {
            flex-shrink: 0;
            padding-top: 0.75rem;
            margin-top: 0.75rem;
            border-top: 1px solid #e5e7eb; /* Mantém apenas a linha divisória */
            background-color: #ffffff; /* Fundo branco */
            position: relative; /* Necessário para posicionar o botão de adicionar */
        }

        /* 4. A lista de adendos (sem alteração) */
        .adendos-list {
            max-height: 150px;
            overflow-y: auto;
            padding-right: 0.5rem;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        /* 5. Estilo da "bolha" de cada adendo (sem alteração) */
        .adendo-bubble {
            background-color: #eef2ff;
            padding: 0.5rem 0.75rem;
            border-radius: 0.5rem;
            font-size: 0.875rem;
            line-height: 1.4;
        }

        /* 6. Estilo dos metadados (quem e quando) do adendo (sem alteração) */
        .adendo-meta {
            font-size: 0.75rem;
            color: #6b7280;
            text-align: right;
            margin-top: 0.25rem;
        }

        /* Botão de expandir/recolher com ícone */
        .adendo-toggle-icon-btn {
            background-color: #f3f4f6; /* bg-gray-100 */
            color: #4b5563; /* text-gray-600 */
            border-radius: 9999px; /* rounded-full */
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            transition: background-color 0.2s;
        }
        .adendo-toggle-icon-btn:hover {
            background-color: #e5e7eb; /* bg-gray-200 */
        }

        /* --- ESTILOS PARA O PAINEL DE NOTIFICAÇÕES --- */
        #notification-list .notification-item {
            padding: 0.75rem; /* 12px */
            border-bottom: 1px solid #f3f4f6; /* border-gray-100 */
            transition: background-color 0.2s ease-in-out;
            cursor: pointer;
        }

        #notification-list .notification-item:hover {
            background-color: #f9fafb; /* bg-gray-50 */
        }

        #notification-list .notification-item:last-child {
            border-bottom: none;
        }

        /* Estilo para notificações NÃO LIDAS */
        #notification-list .notification-item.unread {
            background-color: #eef2ff; /* bg-indigo-50 */
            position: relative;
        }

        /* Pequeno ponto azul para indicar não lida */
        #notification-list .notification-item.unread::before {
            content: '';
            position: absolute;
            right: 12px;  /* Alinhado com o padding direito (0.75rem) */
            bottom: 15px; /* Posicionado para alinhar verticalmente com a linha da data */
            width: 8px;   /* Aumentado para melhor visibilidade */
            height: 8px;
            background-color: #4f46e5; /* bg-indigo-600 */
            border-radius: 50%;
            /* A propriedade 'transform' foi removida pois não é mais necessária */
        }

        /* Esconde permanentemente o botão 'x' das tags nos módulos de Riscos e Cuidados */
        #module-riscos.module-editing .info-tag .remove-item-btn,
        #module-cuidados-enfermagem.module-editing .info-tag .remove-item-btn {
            display: none;
        }

        /* 1. Adiciona uma transição suave para os cards de paciente */
        .patient-card, .patient-list-item {
            transition: all 0.35s ease-in-out;
        }

        /* 2. Define o estado "arquivando" que será ativado via JavaScript */
        .is-archiving {
            opacity: 0;
            transform: scale(0.95);
            max-height: 0;
            padding-top: 0;
            padding-bottom: 0;
            margin-top: 0;
            margin-bottom: -1rem; /* Compensa o 'gap' para os outros itens subirem suavemente */
            overflow: hidden;
            border-width: 0;
        }

        /* --- Adiciona estilo às listas de autocomplete --- */
        #diagnosis-autocomplete-list,
        #medication-autocomplete-list {
            position: absolute; /* Garante o posicionamento flutuante */
            background-color: white;
            border: 1px solid #d1d5db; /* Tailwind: border-gray-300 */
            border-radius: 0.375rem; /* Tailwind: rounded-md */
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1); /* Tailwind: shadow-lg */
            z-index: 10000; /* Z-index alto para sobrepor tudo */
            max-height: 240px; /* A altura máxima continua limitando o tamanho */
            overflow-y: auto;
        }

        /* Melhora a aparência do item na lista de autocomplete */
        .autocomplete-item {
            padding: 0.5rem 0.75rem;
            font-size: 0.875rem;
            cursor: pointer;
        }

        .autocomplete-item:hover {
            background-color: #f3f4f6; /* Tailwind: bg-gray-100 */
        }

        #search-patient:not(:placeholder-shown) + #search-placeholder-container {
            display: none;
        }

        /* Estilo base para os cards de cada módulo dentro do popup */
        .popup-module-card {
            background-color: #ffffff; /* Fundo branco */
            border: 1px solid #e5e7eb; /* Borda cinza claro */
            border-radius: 0.75rem; /* Cantos mais arredondados */
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1); /* Sombra suave */
            padding: 1rem; /* Espaçamento interno */
        }

        /* Cabeçalho de cada módulo */
        .popup-module-header {
            font-size: 0.875rem; /* text-sm */
            font-weight: 600; /* font-semibold */
            color: #1e3a8a; /* text-blue-800 */
            border-bottom: 1px solid #dbeafe; /* border-blue-100 */
            padding-bottom: 0.5rem;
            margin-bottom: 1rem;
        }

        /* Container para os campos de um módulo */
        .popup-module-content {
            display: flex;
            flex-direction: column;
            gap: 1rem; /* Espaçamento entre os campos */
        }

        /* Estilo para os rótulos (labels) dentro do popup */
        #ai-confirmation-form label {
            display: block;
            margin-bottom: 0.25rem;
            font-size: 0.75rem; /* text-xs */
            font-weight: 500; /* font-medium */
            color: #4b5563; /* text-gray-600 */
        }

        /* Estilo para todos os inputs e textareas do popup */
        #ai-confirmation-form input[type="text"],
        #ai-confirmation-form textarea {
            width: 100%;
            border-radius: 0.375rem; /* rounded-md */
            border: 1px solid #d1d5db; /* border-gray-300 */
            padding: 0.5rem 0.75rem;
            font-size: 0.875rem; /* text-sm */
            color: #111827; /* text-gray-900 */
            box-shadow: inset 0 1px 2px 0 rgb(0 0 0 / 0.05);
            transition: border-color 0.2s, box-shadow 0.2s;
        }

        #ai-confirmation-form input[type="text"]:focus,
        #ai-confirmation-form textarea:focus {
            outline: none;
            border-color: #2563eb; /* Cor da borda ao focar (blue-600) */
            box-shadow: 0 0 0 2px rgba(37, 99, 235, 0.4); /* Sombra externa ao focar */
        }

        /* --- INÍCIO: ESTILOS PARA AUTOCOMPLETE NO POPUP DE VOZ --- */

        /* Ícone de busca dentro dos inputs do popup */
        .popup-search-icon {
            position: absolute;
            right: 0.5rem; /* 8px */
            top: 50%;
            transform: translateY(-50%);
            padding: 0.25rem; /* 4px */
            color: #9ca3af; /* text-gray-400 */
            background-color: transparent;
            border-radius: 9999px;
            cursor: pointer;
            transition: color 0.2s;
        }

        .popup-search-icon:hover {
            color: #3b82f6; /* text-blue-500 */
        }

        /* Ajusta o padding do input para não sobrepor o ícone */
        #ai-confirmation-form input[type="text"] {
            padding-right: 2.25rem; /* 36px */
        }

        /* Lista de autocomplete flutuante dentro do popup */
        .popup-autocomplete-list {
            position: absolute; /* Posicionamento relativo ao primeiro ancestral 'relative' (o card do popup) */
            background-color: white;
            border: 1px solid #d1d5db;
            border-radius: 0.375rem; /* rounded-md */
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            z-index: 100; /* Garante que fique sobre outros elementos do popup */
            max-height: 180px;
            overflow-y: auto;
            width: 100%; /* Ocupa a largura do seu contêiner pai */
            margin-top: 0.25rem; /* Pequeno espaço abaixo do input */
        }

        /* Item individual da lista */
        .popup-autocomplete-item {
            padding: 0.6rem 0.75rem;
            font-size: 0.875rem; /* text-sm */
            color: #374151; /* text-gray-700 */
            cursor: pointer;
            border-bottom: 1px solid #f3f4f6; /* Borda sutil entre os itens */
        }
        .popup-autocomplete-item:last-child {
            border-bottom: none;
        }

        .popup-autocomplete-item:hover, .popup-autocomplete-item.is-active {
            background-color: #f3f4f6; /* bg-gray-100 */
            color: #111827; /* text-gray-900 */
        }

        /* --- INÍCIO: ESTILOS PARA CARDS DE RECOMENDAÇÃO NO POPUP --- */

        .recommendation-card {
            background-color: #eef2ff; /* bg-indigo-50 */
            border-left: 4px solid #4f46e5; /* border-l-4 border-indigo-600 */
            padding: 0.75rem 1rem; /* p-3 px-4 */
            border-radius: 0.375rem; /* rounded-md */
        }

        .recommendation-header {
            font-size: 0.75rem; /* text-xs */
            font-weight: 600; /* font-semibold */
            color: #4338ca; /* text-indigo-700 */
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .recommendation-body {
            margin-top: 0.25rem; /* mt-1 */
            font-size: 0.875rem; /* text-sm */
            color: #1e1b4b; /* text-indigo-900 */
        }

        .recommendation-body strong {
            font-weight: 600; /* font-semibold */
        }

        /* --- INÍCIO: ESTILOS PARA SUGESTÃO DE DISPOSITIVO NO POPUP --- */
        .device-suggestion-wrapper {
            display: flex;
            align-items: center;
            gap: 0.5rem; /* 8px */
        }
        .device-suggestion-wrapper input {
            flex-grow: 1; /* Faz o input ocupar o espaço disponível */
        }
        .device-suggestion-button {
            flex-shrink: 0; /* Impede que o botão encolha */
            background-color: #dbeafe; /* bg-blue-100 */
            color: #1e40af; /* text-blue-800 */
            border: 1px solid #93c5fd; /* border-blue-300 */
            padding: 0.25rem 0.6rem;
            font-size: 0.75rem; /* text-xs */
            font-weight: 600; /* font-semibold */
            border-radius: 9999px; /* rounded-full */
            cursor: pointer;
            transition: all 0.2s;
            white-space: nowrap;
        }
        .device-suggestion-button:hover {
            background-color: #93c5fd; /* bg-blue-300 */
            color: #1e3a8a; /* text-blue-900 */
        }

        #sound-wave-container {
            transition: all 0.3s ease-in-out;
        }

        .sound-wave {
            width: 4px;
            height: 100%;
            background-color: #4b5563; /* text-gray-600 */
            border-radius: 2px;
            margin: 0 2px;
            animation: sound-wave-animation 1.2s infinite ease-in-out;
            transform-origin: bottom;
        }

        /* Adiciona um atraso diferente para cada barra, criando o efeito de onda */
        .sound-wave:nth-child(2) {
            animation-delay: -1.1s;
        }
        .sound-wave:nth-child(3) {
            animation-delay: -1.0s;
        }
        .sound-wave:nth-child(4) {
            animation-delay: -0.9s;
        }
        
        /* --- ESTILOS PARA VALIDAÇÃO DE INPUTS --- */
        .input-error-message {
            color: #DC2626; /* Cor text-red-600 do Tailwind */
            font-size: 0.75rem; /* text-xs */
            font-weight: 500; /* font-medium */
            margin-top: 4px;
            max-height: 0;
            opacity: 0;
            overflow: hidden;
            transition: all 0.3s ease-in-out;
        }

        .input-error-message.is-visible {
            max-height: 20px; /* Altura suficiente para uma linha de texto */
            opacity: 1;
        }

        /* Adiciona uma borda vermelha ao input quando há erro */
        input.has-error {
            border-color: #EF4444; /* Cor border-red-500 */
            box-shadow: 0 0 0 1px #F87171; /* Sombra sutil para destaque */
        }

        /* Estilo para o ícone de erro ao lado do valor */
        .monitoring-error-icon {
            display: none; /* Começa escondido */
            color: #EF4444; /* Cor red-500 */
            margin-left: 6px;
        }

        /* Mostra o ícone quando o display do valor tem erro */
        .monitoring-display-area.has-error + .monitoring-error-icon {
            display: inline-block;
        }
        .monitoring-display-area.hidden + .monitoring-error-icon {
            display: none;
        }

        /* Estilos para o painel de medicações da unidade */
        #unit-medications-content .medication-patient-card {
            background-color: #f9fafb; /* bg-gray-50 */
            border: 1px solid #e5e7eb; /* border-gray-200 */
            border-radius: 0.5rem; /* rounded-lg */
            padding: 0.75rem 1rem;
        }

        #unit-medications-content .medication-patient-card.is-overdue {
            background-color: #fef2f2; /* bg-red-50 */
            border-color: #fecaca; /* border-red-200 */
        }

        #unit-medications-content .medication-item {
            font-size: 0.875rem; /* text-sm */
        }

        #unit-medications-content .medication-item.is-overdue .medication-time {
            color: #dc2626; /* text-red-600 */
            font-weight: 600; /* font-semibold */
        }

        .medication-list {
            flex-grow: 1;
            background-color: #f9fafb; /* bg-gray-50 */
            border-radius: 0.375rem; /* rounded-md */
            padding: 0.5rem;
            overflow-y: auto; /* Ativa a barra de rolagem quando o conteúdo exceder a altura */
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            height: 150px; /* Define uma altura fixa para a lista, forçando a rolagem interna */
        }

        .medication-grid-container {
            flex-grow: 1;
            min-height: 0;
        }

        .medication-column {
            display: flex;
            flex-direction: column;
            min-height: 0;
        }

        .medication-column-header {
            font-size: 0.75rem; /* text-xs */
            font-weight: 600; /* font-semibold */
            color: #4b5563; /* text-gray-600 */
            margin-bottom: 0.25rem;
            text-align: center;
            border-bottom: 1px solid #f3f4f6; /* border-gray-100 */
            padding-bottom: 0.25rem;
        }


        .medication-list-item {
            background-color: #ffffff;
            border: 1px solid #e5e7eb; /* border-gray-200 */
            border-radius: 0.375rem; /* rounded-md */
            padding: 0.5rem 0.75rem;
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); /* shadow-sm */
            font-size: 0.875rem; /* text-sm */
            transition: all 0.2s ease-in-out;
        }

        .medication-list-item.is-overdue {
            background-color: #fef2f2; /* bg-red-50 */
            border-color: #fecaca; /* border-red-200 */
        }

        .medication-list-item-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }

        .medication-list-item-name {
            font-weight: 600; /* font-semibold */
            color: #1f2937; /* text-gray-800 */
        }

        .medication-list-item-dose {
            font-size: 0.75rem; /* text-xs */
            color: #6b7280; /* text-gray-500 */
        }

        .medication-list-item-time {
            font-size: 0.75rem; /* text-xs */
            font-weight: 500; /* font-medium */
            color: #4b5563; /* text-gray-600 */
            margin-top: 0.25rem;
        }

        .medication-list-item-actions {
            display: flex;
            gap: 0.25rem;
        }

        .med-action-btn {
            background: none;
            border: none;
            cursor: pointer;
            padding: 0.25rem;
            border-radius: 9999px;
            transition: background-color 0.2s;
        }

        .med-action-btn svg {
            width: 1rem; /* h-4 */
            height: 1rem; /* w-4 */
        }

        .med-action-btn:hover {
            background-color: #f3f4f6; /* bg-gray-100 */
        }

        .med-info-icon {
            font-size: 0.75rem; /* text-xs */
            color: #6b7280; /* text-gray-500 */
            font-style: italic;
            cursor: help; /* Muda o cursor para indicar que há um tooltip */
        }

        /* Transforma o item principal de medicação em um flex container */
        .medication-list-item {
            display: flex;
            justify-content: space-between; /* Espaça a informação e os botões */
            align-items: flex-start; /* Alinha os itens no topo */
        }

        /* Container para as informações da medicação (nome, dose, etc) */
        .med-info-container {
            display: flex;
            flex-direction: column; /* Coloca cada <p> em uma nova linha */
            gap: 0.1rem; /* Pequeno espaço entre as linhas de texto */
            flex-grow: 1; /* Permite que este container ocupe o espaço disponível */
            min-width: 0; /* Previne que o texto empurre os botões para fora */
        }

        /* Garante que o nome possa ser quebrado se for muito longo */
        .medication-list-item-name {
            word-break: break-word;
        }

        .medication-list-item-freq {
            margin-top: -2px; /* Puxa a linha de frequência um pouco para cima, reduzindo o espaçamento */
            line-height: 1; /* Garante que a altura da linha seja compacta */
        }

        /* Container para os botões de ação */
        .medication-list-item-actions {
            flex-shrink: 0; /* Impede que os botões encolham */
            margin-left: 0.5rem; /* ml-2 */
            display: flex;
            gap: 0.25rem; /* space-x-1 */
        }

        /* Transforma o item principal de exame em um flex container */
        .exam-item {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            background-color: white;
            padding: 0.5rem;
            border-radius: 0.25rem;
            border: 1px solid #e5e7eb;
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            font-size: 0.875rem;
        }

        /* Container para as informações do exame */
        .exam-info-container {
            flex-grow: 1;
            min-width: 0;
        }

        /* Container para as ações do exame */
        .exam-actions-container {
            flex-shrink: 0;
            margin-left: 0.5rem;
            display: flex;
            gap: 0.5rem; /* space-x-2 */
        }

        /* Estiliza a lista de horários dentro do card de medicação */
        .medication-list-item-times-administered {
            font-size: 0.75rem; /* text-xs */
            color: #4b5563; /* text-gray-600 */
            margin-top: 2px;
            line-height: 1.2;
        }

        /* Impede que o horário e a data quebrem para a linha seguinte, a menos que seja necessário */
        .med-time-wrapper {
            white-space: nowrap;
        }

        @keyframes sound-wave-animation {
            0%, 40%, 100% {
                transform: scaleY(0.1);
            }
            20% {
                transform: scaleY(1.0);
            }
        }
        /* --- INÍCIO: NOVOS ESTILOS PARA MOBILE --- */
        @media (max-width: 768px) {
            /* Reduz o título do histórico do módulo no celular */
            #module-history-title {
                font-size: 1.125rem; /* Equivalente a text-lg do Tailwind */
                line-height: 1.75rem; /* Equivalente a text-lg do Tailwind */
            }

            /* Ajusta o popup do histórico para não transbordar no celular */
            #module-history-modal .relative {
                width: 95%; /* Ocupa 95% da tela, evitando transbordar */
                padding: 1rem; /* Reduz o padding interno no celular */
            }

            /* Opcional: Reduz o título do modal de detalhes do plantão também */
            #view-handover-main-title {
                font-size: 1.125rem;
                line-height: 1.75rem;
            }

            /*
             * Aumenta a fonte de inputs e textareas para 16px em telas menores
             * para prevenir o zoom automático em dispositivos iOS.
             * O !important garante que esta regra sobrescreva as outras em telas de celular.
            */
            input[type="text"],
            input[type="email"],
            input[type="password"],
            input[type="number"],
            input[type="time"],
            textarea {
                font-size: 16px !important;
            }

            /* Permite que o corpo e o app cresçam e rolem verticalmente */
            body, #app {
                height: auto;
                min-height: 100vh; /* Garante que o fundo ocupe a tela toda */
                overflow: visible;
            }

            /* Força a área principal a ser a responsável pela rolagem */
            main {
                overflow-y: visible;
            }
            
            /* Garante que os cabeçalhos fiquem fixos no topo ao rolar a tela */
            #main-content > header, #patient-detail-screen > header {
                position: sticky;
                top: 0;
                z-index: 50; /* Garante que fique sobre o conteúdo */
            }

            /* Adiciona um espaçamento no final da tela de detalhes do paciente */
            /* para que o botão "Salvar" não fique escondido pela barra de navegação */
            #patient-detail-screen main {
                padding-bottom: 6rem; /* 96px de espaço extra no final */
            }

            #trends-chart-container > div {
                /* Aumenta a altura do container do gráfico para 70% da altura da tela em dispositivos móveis */
                height: 70vh;
            }
            #patient-detail-name {
                /* Define uma largura máxima para o contêiner do nome,
                   evitando que ele empurre os botões para fora da tela.
                   O cálculo subtrai o espaço aproximado dos botões e margens. */
                max-width: calc(100vw - 150px);

                /* As três propriedades abaixo garantem que, se o nome ainda for
                   muito longo, ele será cortado com "..." no final. */
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
            }

            /* 1. Remove o posicionamento fixo à direita do painel */
            #notification-panel {
                position: fixed; /* Garante que ele flutue sobre o conteúdo */
                right: auto;     /* Remove o alinhamento à direita */
                left: 50%;       /* Posiciona o lado esquerdo do painel no meio da tela */
                top: 6rem; /* Distância do topo */
                transform: translateX(-50%); /* Puxa o painel de volta pela metade de sua largura, centralizando-o */
                width: 95%;      /* Define a largura para 95% da tela, deixando pequenas margens */
                max-width: 400px; /* Define uma largura máxima para não ficar excessivamente largo em telas maiores */
            }
            
        }
        /* --- FIM: NOVOS ESTILOS PARA MOBILE --- */
